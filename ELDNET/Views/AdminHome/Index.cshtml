@model IEnumerable<ELDNET.Models.AdminDashboardViewModel>
@{
    ViewData["Title"] = "Admin Dashboard";
}

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
<link rel="stylesheet" href="~/css/AdminHome.css" asp-append-version="true">

<div class="dashboard-container">
    @foreach (var dashboardItem in Model)
    {
        <div class="page-header-centered">
            <h1 class="page-title">Admin <span class="text-gradient">Dashboard</span></h1>
            <p class="page-description">
                Monitor real-time requests and manage institutional access.
            </p>
        </div>

        <div class="d-flex align-items-center mb-3">
            <div class="p-1 px-2 bg-white rounded-2 shadow-sm me-2">
                <i class="bi bi-grid-fill text-primary small"></i>
            </div>
            <h5 class="section-title mb-0">Service Requests</h5>
        </div>

        <div class="row g-4 mb-5">
            <div class="col-lg-4 col-md-6">
                <div class="request-card hover-blue">
                    <div class="card-img-container">
                        @if (dashboardItem.PendingGatePasses > 0 || dashboardItem.ChangedGatePasses > 0)
                        {
                            <div class="notification-pill">
                                @(dashboardItem.PendingGatePasses + dashboardItem.ChangedGatePasses) New
                            </div>
                        }
                        <img src="~/images/reservation.png" alt="Gate Pass">
                    </div>
                    <div class="card-content">
                        <div class="metric-label-container">
                            <div class="metric-title">Gate Pass</div>
                        </div>
                        <div class="metric-value">@dashboardItem.TotalGatePasses</div>
                        <p class="request-description">Track entry/exit logs and security clearance.</p>
                        <a href="@Url.Action("Index", "Approval", new { tab = "gatepass" })" class="btn-action btn-blue">Manage Requests</a>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="request-card hover-green">
                    <div class="card-img-container">
                        @if (dashboardItem.PendingRoomReservations > 0 || dashboardItem.ChangedRoomReservations > 0)
                        {
                            <div class="notification-pill">
                                @(dashboardItem.PendingRoomReservations + dashboardItem.ChangedRoomReservations) New
                            </div>
                        }
                        <img src="~/images/roomadmin.png" alt="Room Reservation">
                    </div>
                    <div class="card-content">
                        <div class="metric-label-container">
                            <div class="metric-title">Room Reservation</div>
                        </div>
                        <div class="metric-value">@dashboardItem.TotalRoomReservations</div>
                        <p class="request-description">Manage facility schedules and classroom usage.</p>
                        <a href="@Url.Action("Index", "Approval", new { tab = "reservation" })" class="btn-action btn-green">Manage Reservations</a>
                    </div>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="request-card hover-amber">
                    <div class="card-img-container">
                        @if (dashboardItem.PendingLockerRequests > 0 || dashboardItem.ChangedLockerRequests > 0)
                        {
                            <div class="notification-pill">
                                @(dashboardItem.PendingLockerRequests + dashboardItem.ChangedLockerRequests) New
                            </div>
                        }
                        <img src="~/images/lockeradmin.png" alt="Locker Request">
                    </div>
                    <div class="card-content">
                        <div class="metric-label-container">
                            <div class="metric-title">Locker Request</div>
                        </div>
                        <div class="metric-value">@dashboardItem.TotalLockerRequests</div>
                        <p class="request-description">Review applications and assign storage units.</p>
                        <a href="@Url.Action("Index", "Approval", new { tab = "locker" })" class="btn-action btn-amber">Manage Lockers</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="d-flex align-items-center mb-3">
            <div class="p-1 px-2 bg-white rounded-2 shadow-sm me-2">
                <i class="bi bi-people-fill text-primary small"></i>
            </div>
            <h5 class="section-title mb-0">Account Management</h5>
        </div>

        <div class="row g-4">
            <div class="col-md-6">
                <div class="account-tile">
                    <div class="icon-circle bg-soft-blue">
                        <i class="bi bi-mortarboard-fill"></i>
                    </div>
                    <div class="account-info">
                        <h4>@dashboardItem.TotalStudents</h4>
                        <p class="text-muted fw-medium mb-0">Registered Students</p>
                    </div>
                    <a href="@Url.Action("Index", "StudentAccounts")" class="btn-manage">Manage Students</a>
                </div>
            </div>

            <div class="col-md-6">
                <div class="account-tile">
                    <div class="icon-circle bg-soft-green">
                        <i class="bi bi-person-workspace"></i>
                    </div>
                    <div class="account-info">
                        <h4>@dashboardItem.TotalFaculty</h4>
                        <p class="text-muted fw-medium mb-0">Faculty Accounts</p>
                    </div>
                    <a href="@Url.Action("Index", "FacultyAccounts")" class="btn-manage">Manage Faculty</a>
                </div>
            </div>
        </div>
    }
</div>