@model IEnumerable<ELDNET.Models.GatePass>

@{
    ViewData["Title"] = "Gate Pass List";
}

<div class="container p-3">
    <div class="row pt-4">
        <div class="col-6">
            <h2 class="text-primary">Gate Pass List</h2>
        </div>
        <div class="col-6 text-end">
            <a asp-controller="GatePass" asp-action="Create" class="btn btn-primary">
                + Create New Gate Pass
            </a>
        </div>
    </div>
    <br />

    @if (Model != null && Model.Any())
    {
        <table class="table table-bordered table-striped">
            <thead class="table-light">
                <tr>
                    <th>School Year</th>
                    <th>Name</th>
                    <th>Address</th>
                    <th>Date</th>
                    <th>Staff Type</th>
                    <th>Department</th>
                    <th>Course & Year</th>
                    <th>Plate No.</th>
                    <th>Maker</th>
                    <th>Color</th>
                    <th>Study Load</th>
                    <th>Registration Form</th>
                    <th>Status</th>
                    <th class="text-center">Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var obj in Model)
                {
                    <tr>
                        <td>@obj.SchoolYear</td>
                        <td>@obj.Name</td>
                        <td>@obj.Address</td>
                        <td>@obj.Date.ToString("yyyy-MM-dd")</td>
                        <td>@obj.Role</td>
                        <td>@obj.Department</td>
                        <td>@obj.CourseYear</td>
                        <td>@obj.PlateNumber</td>
                        <td>@obj.Maker</td>
                        <td>@obj.Color</td>

                        <!-- Study Load column -->
                        <td>
                            @if (!string.IsNullOrEmpty(obj.StudyLoadPath))
                            {
                                <a href="@obj.StudyLoadPath" target="_blank" class="btn btn-sm btn-link">View</a>
                            }
                            else
                            {
                                <span class="text-muted">No File</span>
                            }
                        </td>

                        <!-- Registration Form column -->
                        <td>
                            @if (!string.IsNullOrEmpty(obj.RegistrationPath))
                            {
                                <a href="@obj.RegistrationPath" target="_blank" class="btn btn-sm btn-link">View</a>
                            }
                            else
                            {
                                <span class="text-muted">No File</span>
                            }
                        </td>
                        <td>@obj.Status</td>
                        <td>
                            <div class="w-20 btn-group" role="group">
                                <a asp-action="Edit" asp-route-id="@obj.Id">&nbsp;Edit&nbsp;</a> |
                                <a asp-action="Details" asp-route-id="@obj.Id">&nbsp;Details&nbsp;</a> |
                                <a asp-action="Delete" asp-route-id="@obj.Id">&nbsp;Delete</a>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <div class="alert alert-info text-center">
            No Gate Pass Records Found.
        </div>
    }
</div>
